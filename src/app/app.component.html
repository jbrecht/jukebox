<div class="app">
  <header class="header">
    <div class="logo-container">
      <h1><img src="assets/tasty-2.svg" alt="Tasty Logo" class="logo"><span>Jukebox</span></h1>
    </div>
  </header>
  
  <!-- Always visible music player -->
  <section class="player-section">
    <div class="player-container">
      @if (currentlyPlaying) {
        <div class="now-playing-info">
          <div class="now-playing-text">ğŸµ Now Playing</div>
          <div class="song-title">{{ formatFileName(currentlyPlaying.name) }}</div>
        </div>
        <audio #audioPlayer controls [src]="currentlyPlaying.url" class="audio-player">
          Your browser does not support the audio element.
        </audio>
      } @else {
        <div class="no-music">
          <div class="select-music-text">Pick a song below</div>
        </div>
      }
    </div>
  </section>

  <main class="main-content">
    <!-- Left side: Folders -->
    <aside class="sidebar-left">
      <div class="section-header">
        <h2>ğŸ“ Folders</h2>
      </div>
      <div class="folder-list">
        @for (folder of folders; track folder.prefix) {
          <div class="folder-card" 
               [class.selected]="selectedFolder?.prefix === folder.prefix"
               (click)="selectFolder(folder)">
            <div class="folder-icon">ğŸ¶</div>
            <div class="folder-name">{{ formatFolderName(folder.name) }}</div>
          </div>
        }
      </div>
    </aside>
    
    <!-- Right side: Files -->
    <section class="content-area">
      @if (selectedFolder) {
        <div class="section-header">
          <h2>ğŸµ {{ formatFolderName(selectedFolder.name) }} Tracks</h2>
          <div class="track-count">{{ files.length }} songs</div>
        </div>
        <div class="file-grid">
          @for (file of files; track file.key) {
            <div class="track-card" 
                 [class.playing]="currentlyPlaying?.key === file.key">
              <div class="track-info">
                <div class="track-icon">ğŸµ</div>
                <div class="track-details">
                  <div class="track-name" (click)="playFile(file)">{{ formatFileName(file.name) }}</div>
                  <div class="track-size">{{ s3Service.formatFileSize(file.size) }}</div>
                </div>
              </div>
              <div class="track-actions">
                <button class="action-btn play-btn" (click)="playFile(file)" 
                        [title]="'Play ' + file.name">
                  @if (currentlyPlaying?.key === file.key) {
                    ğŸ”Š
                  } @else {
                    â–¶ï¸
                  }
                </button>
                <a [href]="file.url" [download]="file.name" 
                   class="action-btn download-btn" 
                   [title]="'Download ' + file.name">
                  ğŸ’¾
                </a>
              </div>
            </div>
          }
        </div>
      } @else {
        <div class="welcome-area">
          <div class="welcome-icon">ğŸª</div>
          <h2>Welcome to the Big Top!</h2>
          <p>ğŸ‘ˆ Choose a folder to set your lineup!</p>
        </div>
      }
    </section>
  </main>
</div>